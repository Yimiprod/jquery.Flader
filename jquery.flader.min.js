/**
* jQuery Flader
* Dependancies:
*   Jquery
*   Jquery.transit : http://ricostacruz.com/jquery.transit/ || https://github.com/rstacruz/jquery.transit
*       If Jquer.transit forgotten, plugin will use Jquery.animate()
*
* Author: Vidril CÃ©sar
**/
(function(e){e.Flader=function(t,n){var r={btns_classe:"",wrap_classe:"",slide_type:"slide",speed:500,easing:"",mouse_event:"click",cycling_slide:true,auto_slide:false,auto_slide_delay:5e3,onSlide:function(e){}};var i=this;i.settings={};var s=e(t),t=t;var o,u,a,f,l,c,h,p,d;var v=false,m=["slide","fade"],g=false;i.init=function(){i.settings=e.extend({},r,n);if(!e.support.transition||undefined===e.fn.transition)e.fn.transition=e.fn.animate;if(!~e.inArray(i.settings.slide_type,m))i.settings.slide_type="slide";if(!i.settings.cycling_slide&&i.settings.slide_type=="slide")i.settings.auto_slide=false;l=e('[data-function="slider_container"]',s).length?e('[data-function="slider_container"]',s):e("<div/>",{"data-function":"slider_container"});c=e('[data-function="slider_item"]',s).addClass("slider_item");o=e("<div/>",{"class":"slider_wrap"});a=e("<button/>",{"class":"slider_nav left"}).addClass(i.settings.btns_classe).on(i.settings.mouse_event,function(){b("prev")});f=e("<button/>",{"class":"slider_nav right"}).addClass(i.settings.btns_classe).on(i.settings.mouse_event,function(){b("next")});l.addClass("slider_content");s.addClass(i.settings.slide_type+" slider_container");s.append(o.append(l.append(c)));if(c.length>1)s.append(o.append(a,f));h=c.filter(".active");if(!h.length||h.length>1){h=c.removeClass("active").first().addClass("active")}if(!i.settings.cycling_slide){u=null;if(h.index()===0)u=a.addClass("hide");if(h.index()===c.length-1)u=f.addClass("hide")}var t=maxWidth=0;e.each(c,function(){maxWidth=Math.max(maxWidth,e(this).outerWidth());t=Math.max(t,e(this).outerHeight())});if(i.settings.mouse_event==="mousehold"){i.settings.easing="linear";function p(){g=false}a.on({mousedown:function(){g=true;e(this).trigger("mousehold")},"mouseout mouseup":p});f.on({mousedown:function(){g=true;e(this).trigger("mousehold")},"mouseout mouseup":p})}if(i.settings.auto_slide)y()};var y=function(){d=setTimeout(function(){b()},i.settings.auto_slide_delay)};var b=function(t){if(!v){if(t===undefined)t="next";if(d!==undefined)clearTimeout(d);h=c.filter(".active");p=h[t]().length?h[t]():c.filter(t==="next"?":first":":last");var n={current:h,follow:p};v=true;e.when(i.settings.slide_type==="fade"?w():E(t),i.settings.onSlide(n)).done(function(){h.removeClass("active");v=false;if(g)b(t);if(i.settings.auto_slide&&!g)y()})}};var w=function(){return p.addClass("active").css({opacity:0,"z-index":20}).transition({opacity:1,duration:i.settings.speed,easing:i.settings.easing},function(){h.css({opacity:"0"});p.css({"z-index":""})})};var E=function(t){p.addClass("active");p[t==="next"?"before":"after"](h);c=e('[data-function="slider_item"]',s);var n=c.filter(h).index(),r=c.filter(p).index();if(!i.settings.cycling_slide){if(u!==null)u.removeClass("hide");u=null;if(r===0)u=a.addClass("hide");if(r===c.length-1)u=f.addClass("hide")}return c.each(function(t){e(this).css({left:100.05*(t-n)+"%"}).transition({left:100.05*(t-r)+"%",duration:i.settings.speed,easing:i.settings.easing})})};i.init()};e.fn.Flader=function(t){return this.each(function(){if(undefined==e(this).data("Flader")){var n=new e.Flader(this,t);e(this).data("Flader",n)}})}})(jQuery)