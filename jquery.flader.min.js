/**
* jQuery Flader
* Dependancies:
*   Jquery
*   Jquery.transit : http://ricostacruz.com/jquery.transit/ || https://github.com/rstacruz/jquery.transit
*       If Jquer.transit forgotten, plugin will use Jquery.animate()
*
* Author: Vidril CÃ©sar
**/
!function(a){a.Flader=function(b,c){var d={btns_classe:"",wrap_classe:"",slide_type:"slide",fixe_height:!1,speed:500,easing:"",mouse_event:"click",cycling_slide:!0,auto_slide:!1,auto_slide_delay:5e3,onSlide:function(){}},e=this;e.settings={};var g,h,i,j,k,l,m,n,o,f=a(b),p=!1,q=["slide","fade"],r=!1;e.init=function(){e.settings=a.extend({},d,c),a.support.transition&&void 0!==a.fn.transition||(a.fn.transition=a.fn.animate),~a.inArray(e.settings.slide_type,q)||(e.settings.slide_type="slide"),e.settings.cycling_slide||"slide"!=e.settings.slide_type||(e.settings.auto_slide=!1),k=a('[data-function="slider_content"]',f).length?a('[data-function="slider_content"]',f):a("<div/>",{"data-function":"slider_content"}),l=a('[data-function="slider_item"]',f).addClass("slider_item"),g=a("<div/>",{"class":"slider_wrap"}),i=a("<button/>",{"class":"slider_nav left"}).addClass(e.settings.btns_classe),j=a("<button/>",{"class":"slider_nav right"}).addClass(e.settings.btns_classe),m=l.filter(".active"),(!m.length||m.length>1)&&(m=l.removeClass("active").first().addClass("active")),f.append(g.append(k.append(l))),l.length>1&&f.append(g.append(i,j));var b=l.filter(m).index();"slide"==e.settings.slide_type&&a.each(l,function(c){a(this).css({left:100.05*(c-b)+"%"})}),f.addClass(e.settings.slide_type+" slider_container"),e.settings.fixe_height&&s(),k.addClass("slider_content"),t(),e.settings.auto_slide&&w()};var s=function(){if(e.settings.fixe_height){var b=0;f.is(".slider_container")&&f.removeClass("slider_container").height("auto"),a.each(l,function(){b=Math.max(b,a(this).outerHeight())}),f.height(b),f.addClass("slider_container")}},t=function(){i.on(e.settings.mouse_event+".prev",function(){x("prev")}),j.on(e.settings.mouse_event+".next",function(){x("next")}),e.settings.cycling_slide||(h=null,0===m.index()&&(h=i.addClass("hide")),m.index()===l.length-1&&(h=j.addClass("hide"))),"mousehold"===e.settings.mouse_event&&(e.settings.easing="linear",i.on({mousedown:u,"mouseout mouseup":v}),j.on({mousedown:u,"mouseout mouseup":v})),e.settings.fixe_height&&a(window).on("orientationchange resize",s)},u=function(){r=!0,a(this).trigger("mousehold")},v=function(){r=!1},w=function(){o=setTimeout(function(){x()},e.settings.auto_slide_delay)},x=function(b){if(!p){void 0===b&&(b="next"),void 0!==o&&clearTimeout(o),m=l.filter(".active"),n=m[b]().length?m[b]():l.filter("next"===b?":first":":last");var c={current:m,follow:n};p=!0,a.when("fade"===e.settings.slide_type?y():z(b),e.settings.onSlide(c)).done(function(){m.removeClass("active"),p=!1,r&&x(b),e.settings.auto_slide&&!r&&w()})}},y=function(){return n.addClass("active").css({opacity:0,"z-index":20}).transition({opacity:1,duration:e.settings.speed,easing:e.settings.easing},function(){m.css({opacity:"0"}),n.css({"z-index":""})})},z=function(b){n.addClass("active"),n["next"===b?"before":"after"](m),l=a('[data-function="slider_item"]',f);var c=l.filter(m).index(),d=l.filter(n).index();return e.settings.cycling_slide||(null!==h&&h.removeClass("hide"),h=null,0===d&&(h=i.addClass("hide")),d===l.length-1&&(h=j.addClass("hide"))),l.each(function(b){a(this).css({left:100.05*(b-c)+"%"}).transition({left:100.05*(b-d)+"%",duration:e.settings.speed,easing:e.settings.easing})})};e.init()},a.fn.Flader=function(b){return this.each(function(){if(void 0===a(this).data("Flader")){var c=new a.Flader(this,b);a(this).data("Flader",c)}})}}(jQuery);
