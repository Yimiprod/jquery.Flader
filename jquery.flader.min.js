/**
* jQuery Flader
* Dependancies:
*   Jquery
*   Jquery.transit : http://ricostacruz.com/jquery.transit/ || https://github.com/rstacruz/jquery.transit
*       If Jquer.transit forgotten, plugin will use Jquery.animate()
*
* Author: Vidril César
**/
/**
* jQuery Flader
* https://github.com/Yimiprod/jquery.Flader
* Dependancies:
*   Jquery
*   Jquery.transit : http://ricostacruz.com/jquery.transit/ || https://github.com/rstacruz/jquery.transit
*       If Jquery.transit forgotten, plugin will use Jquery.animate()
*
* Author: Vidril César
*
*============================================*
*              DOCUMENTATION                 *
*============================================*
*
*****************OPTIONS**********************
***
* @btns_classe {String}
*   Custom class for nav buttons
*   Default: ''
***
* @wrap_classe {String}
*   Custom class for btn wrap
*   Default: ''
***
* @slide_type {String}
*   Slide type of the slider ( 'slider' or 'fade' )
*   Default: 'slide'
***
* @speed {Integer} ms
*   Animation Speed in millisecond
*   Default: 500
***
* @easing {String}
*   Easing of the animation, can support all the easing supported by Jquery.transit
*   Default: ''
***
* @mouse_event {String}
*   Mouse event who performe the slide
*   support a custom event 'mousehold' who let the slide continue when mouseclick maintained
*   In mousehold, easing will be 'linear'
*   Default: 'click'
***
* @cycling_slide {Boolean}
* Define if sliding infinitely
* Only in slide mod
* Autoslide disabled when set to false due to the ugly effect if return to first/last slide item.
*   Default: true
***
* @auto_slide {Boolean}
*   When set at true, the slider will perform an autoslide every each @auto_slide_delay
*   Default: false
***
* @auto_slide_delay {Integer} ms
*   Delay between each auto slidein millisecond
*   Default: 5000
***
* @onSlide {Function}
*   callback launch when slide performed, can be used to animate inside the next slide
*   @params: items_sliding {Object} ['current': $(elm), 'follow': $(elm)]
*       The current slide item and the next item displayed, jquery objects
***
****************HOW TO USE IT*******************
***
*   var options = {};
*   $(element).Flader(options);
*
***
**************FONCTIONNEMENT******************
*
* A Slider who use (if possible) css3 transition (see dependencies) to perform a slide or a fade animation
* The content of the item slide can be animated too with the callback onSlide()
* Examples:
*  I =>
*   var options = {
*       onSlide: function(elms) {
*           var childInFollow = $('.child', elms.follow);
*           return childInFollow.transition({ opacity: 1, duration: 300, delay: 500 });
*   }
*  II =>
*   var options = {
*       onSlide: function(elms) {
*           var childInCurrent = $('.child', elms.current).css({ opacity: 1 }),
*               childInFollow = $('.child', elms.follow).css({ opacity: 0 })
*           return $.when(
*               (function(){
*                   return childInCurrent.transition({ opacity: 0, duration: 300 });
*               })(),
*               (function(){
*                   return childInFollow.transition({ opacity: 1, duration: 300 });
*               })()
*           )
*       }
*   }
*
*/
/**
* jQuery Flader
* Dependancies:
*   Jquery
*   Jquery.transit : http://ricostacruz.com/jquery.transit/ || https://github.com/rstacruz/jquery.transit
*       If Jquer.transit forgotten, plugin will use Jquery.animate()
*
* Author: Vidril César
**/
!function(a){a.Flader=function(b,c){var d={btns_classe:"",wrap_classe:"",slide_type:"slide",fixe_height:!1,speed:500,easing:"",mouse_event:"click",cycling_slide:!0,auto_slide:!1,auto_slide_delay:5e3,onSlide:function(){}},e=this;e.settings={};var g,h,i,j,k,l,m,n,o,f=a(b),b=b,p=!1,q=["slide","fade"],r=!1;e.init=function(){function o(){r=!1}e.settings=a.extend({},d,c),a.support.transition&&void 0!==a.fn.transition||(a.fn.transition=a.fn.animate),~a.inArray(e.settings.slide_type,q)||(e.settings.slide_type="slide"),e.settings.cycling_slide||"slide"!=e.settings.slide_type||(e.settings.auto_slide=!1),k=a('[data-function="slider_content"]',f).length?a('[data-function="slider_content"]',f):a("<div/>",{"data-function":"slider_content"}),l=a('[data-function="slider_item"]',f).addClass("slider_item"),g=a("<div/>",{"class":"slider_wrap"}),i=a("<button/>",{"class":"slider_nav left"}).addClass(e.settings.btns_classe).on(e.settings.mouse_event,function(){t("prev")}),j=a("<button/>",{"class":"slider_nav right"}).addClass(e.settings.btns_classe).on(e.settings.mouse_event,function(){t("next")}),k.addClass("slider_content"),f.addClass(e.settings.slide_type+" slider_container"),f.append(g.append(k.append(l))),l.length>1&&f.append(g.append(i,j)),m=l.filter(".active"),(!m.length||m.length>1)&&(m=l.removeClass("active").first().addClass("active")),e.settings.cycling_slide||(h=null,0===m.index()&&(h=i.addClass("hide")),m.index()===l.length-1&&(h=j.addClass("hide")));var b=maxWidth=0,n=m.index();a.each(l,function(c){b=Math.max(b,a(this).outerHeight()),"slide"==e.settings.slide_type&&a(this).css({left:100.05*(c-n)+"%"})}),e.settings.fixe_height&&f.height(b),"mousehold"===e.settings.mouse_event&&(e.settings.easing="linear",i.on({mousedown:function(){r=!0,a(this).trigger("mousehold")},"mouseout mouseup":o}),j.on({mousedown:function(){r=!0,a(this).trigger("mousehold")},"mouseout mouseup":o})),e.settings.auto_slide&&s()};var s=function(){o=setTimeout(function(){t()},e.settings.auto_slide_delay)},t=function(b){if(!p){void 0===b&&(b="next"),void 0!==o&&clearTimeout(o),m=l.filter(".active"),n=m[b]().length?m[b]():l.filter("next"===b?":first":":last");var c={current:m,follow:n};p=!0,a.when("fade"===e.settings.slide_type?u():v(b),e.settings.onSlide(c)).done(function(){m.removeClass("active"),p=!1,r&&t(b),e.settings.auto_slide&&!r&&s()})}},u=function(){return n.addClass("active").css({opacity:0,"z-index":20}).transition({opacity:1,duration:e.settings.speed,easing:e.settings.easing},function(){m.css({opacity:"0"}),n.css({"z-index":""})})},v=function(b){n.addClass("active"),n["next"===b?"before":"after"](m),l=a('[data-function="slider_item"]',f);var c=l.filter(m).index(),d=l.filter(n).index();return e.settings.cycling_slide||(null!==h&&h.removeClass("hide"),h=null,0===d&&(h=i.addClass("hide")),d===l.length-1&&(h=j.addClass("hide"))),l.each(function(b){a(this).css({left:100.05*(b-c)+"%"}).transition({left:100.05*(b-d)+"%",duration:e.settings.speed,easing:e.settings.easing})})};e.init()},a.fn.Flader=function(b){return this.each(function(){if(void 0==a(this).data("Flader")){var c=new a.Flader(this,b);a(this).data("Flader",c)}})}}(jQuery);
